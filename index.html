<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secteur Circulaire</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <style>
        #map {
            height: 100vh;
        }

        .sector {
            fill: rgba(0, 0, 255, 0.5);
            stroke: blue;
            stroke-width: 2;
        }
    </style>
</head>

<body>
    <div id="map"></div>

    <script>
        // Points définis  
        const LatOri = 48.8570;   // Point d'origine (sommet)
        const LonOri = 2.3540;    // Point d'origine (sommet)
        const LatZero = 48.8565;   // Point Zéro (un côté)
        const LonZero = 2.3530;    // Point Zéro (un côté)
        const LatDt = 48.8565;     // Troisième Point (l'autre côté)
        const LonDt = 2.3550;      // Troisième Point (l'autre côté)

        const map = L.map('map').setView([LatOri, LonOri], 15);

        // Couche de la carte  
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
        }).addTo(map);

        // Fonction pour dessiner le secteur circulaire  
        function drawSector() {
            const points = [
                [LatOri, LonOri], // Point d'origine (sommet)
                [LatZero, LonZero], // Point Zéro (un côté)
                [LatDt, LonDt] // Troisième point (l'autre côté)
            ];

            // Créer un arc entre LatZero et LatDt  
            const arcPoints = [];
            const numPoints = 100; // Nombre de points pour l'arc  
            const radius = 0.001; // Rayon pour l'arc

            // Tracer l'arc de cercle  
            const angleStep = Math.atan2(LatDt - LatOri, LonDt - LonOri) - Math.atan2(LatZero - LatOri, LonZero - LonOri);
            for (let i = 0; i <= numPoints; i++) {
                const t = i / numPoints;
                const angle = Math.atan2(LatZero - LatOri, LonZero - LonOri) + angleStep * t;
                arcPoints.push([
                    LatOri + radius * Math.sin(angle),
                    LonOri + radius * Math.cos(angle)
                ]);
            }

            // Ajouter les points de l'arc  
            points.splice(1, 0, ...arcPoints); // Insérer l'arc entre le point d'origine et les deux autres points

            // Créer le secteur circulaire  
            L.polygon(points, { className: 'sector' }).addTo(map);
        }

        drawSector(); // Appeler la fonction pour dessiner le secteur  
    </script>
</body>

</html>
